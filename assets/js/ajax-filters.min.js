jQuery(document).ready(function(t){function e(e){return!!n()&&(!t(document.body).hasClass("disable-job-manager-form-state-storage")&&!e.data("disable-form-state-storage"))}function n(){return window.sessionStorage&&"function"==typeof window.sessionStorage.setItem}function i(e){var n=t("div.job_listings").index(e),i=window.location.href;return n<0&&t(e.context).attr("action")&&(i=t(e.context).attr("action"),n=0),i=i.replace(location.hash,""),_+i+"_"+n}function a(t,n){if(!e(t))return!1;"object"!=typeof n&&(n={});var a=i(t);try{return window.sessionStorage.setItem(a,JSON.stringify(n))}catch(t){}return!1}function o(t){if(!e(t))return!1;var n=i(t);try{var a=window.sessionStorage.getItem(n);if(a)return JSON.parse(a)}catch(t){}return!1}function r(t,n){if(!e(t)||!t)return!1;var i=o(t);return!!i&&(i.persist_results=n,a(t,i))}function s(t){var n=t.closest(".job_listings");if(!e(n)||!n)return!1;var i=o(n);return!!i&&(i.form=t.serialize(),a(n,i))}function l(t,n){if(!e(t))return!1;var i=o(t);i||(i={persist_results:!1});var r=t.find(".job_listings");return n.html=r.html(),i.results=n,a(t,i)}function d(t){if(!e(t))return!1;var n=i(t);try{window.sessionStorage.removeItem(n)}catch(t){return!1}return!0}function c(t){if(!e(t))return!1;var n=o(t);return n||(n={}),n.results=null,a(t,n)}function g(t){if(!e(t))return!1;var n=o(t);return n||(n={}),n.form=null,a(t,n)}function u(e,n,i){var a=e.find(".job_listings"),o=e.find(".showing_jobs");if("boolean"!=typeof i&&(i=!1),"string"==typeof n.showing&&n.showing){var r=jQuery("<span>").html(n.showing);o.show().html("").html(n.showing_links).prepend(r)}else o.hide();return n.showing_all?o.addClass("wp-job-manager-showing-all"):o.removeClass("wp-job-manager-showing-all"),n.html&&(i?a.append(n.html):a.html(n.html)),!0===e.data("show_pagination")?(e.find(".job-manager-pagination").remove(),n.pagination&&e.append(n.pagination)):(!n.found_jobs||n.max_num_pages<=n.data.page?t(".load_more_jobs:not(.load_previous)",e).hide():t(".load_more_jobs",e).show(),t(".load_more_jobs",e).removeClass("loading").data("page",n.data.page),t("li.job_listing",a).css("visibility","visible")),!0}var _="job_listing_";t(document).on("click","a",function(){t(".job_filters").each(function(){s(t(this))})});var f=[];if(t("div.job_listings").on("click","li.job_listing a",function(){r(t(this).closest("div.job_listings"),!0)}).on("click",".job-manager-pagination a",function(){var e=t(this).closest("div.job_listings"),n=t(this).data("page");return e.triggerHandler("update_results",[n,!1]),t("body, html").animate({scrollTop:e.offset().top},600),!1}).on("update_results",function(e,n,i){var a,o,r,s="",c=t(this),g=c.find(".job_filters"),_=c.find(".job_listings"),h=c.data("per_page"),p=c.data("orderby"),b=c.data("order"),m=c.data("featured"),j=c.data("filled"),v=c.data("job_types"),w=c.data("post_status"),y=t("div.job_listings").index(this);if(!(y<0)){if(d(c),f[y]&&f[y].abort(),i&&1!==n||(t("li.job_listing, li.no_job_listings_found",_).css("visibility","hidden"),_.addClass("loading")),c.find(".load_more_jobs").data("page",n),!0===c.data("show_filters")){var k=[];t(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"], :input[name="filter_job_type"]',g).each(function(){k.push(t(this).val())}),a=g.find(':input[name^="search_categories"]').map(function(){return t(this).val()}).get(),o="",r="";var x=g.find(':input[name="search_keywords"]'),S=g.find(':input[name="search_location"]');x.val()!==x.attr("placeholder")&&(o=x.val()),S.val()!==S.attr("placeholder")&&(r=S.val()),s={lang:job_manager_ajax_filters.lang,search_keywords:o,search_location:r,search_categories:a,filter_job_type:k,filter_post_status:w,per_page:h,orderby:p,order:b,page:n,featured:m,filled:j,show_pagination:c.data("show_pagination"),form_data:g.serialize()}}else a=c.data("categories"),o=c.data("keywords"),r=c.data("location"),a&&("string"!=typeof a&&(a=String(a)),a=a.split(",")),s={lang:job_manager_ajax_filters.lang,search_categories:a,search_keywords:o,search_location:r,filter_post_status:w,filter_job_type:v,per_page:h,orderby:p,order:b,page:n,featured:m,filled:j,show_pagination:c.data("show_pagination")};f[y]=t.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url.toString().replace("%%endpoint%%","get_listings"),data:s,success:function(t){if(t)try{t.data=s,u(c,t,i),_.removeClass("loading"),c.triggerHandler("updated_results",t),l(c,t)}catch(t){window.console&&window.console.log(t)}},error:function(t,e,n){window.console&&"abort"!==e&&window.console.log(e+": "+n)},statusCode:{404:function(){window.console&&window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.")}}})}}),t("#search_keywords, #search_location, .job_types :input, #search_categories, .job-manager-filter").change(function(){var e=t(this).closest("div.job_listings");e.triggerHandler("update_results",[1,!1]),a(e)}).on("keyup",function(e){13===e.which&&t(this).trigger("change")}),t(".job_filters").on("click",".reset",function(){var e=t(this).closest("div.job_listings"),n=t(this).closest("form");return n.find(':input[name="search_keywords"], :input[name="search_location"], .job-manager-filter').not(':input[type="hidden"]').val("").trigger("change.select2"),n.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val("").trigger("change.select2"),t(':input[name="filter_job_type[]"]',n).not(':input[type="hidden"]').attr("checked","checked"),e.triggerHandler("reset"),e.triggerHandler("update_results",[1,!1]),a(e),!1}).on("submit",function(e){var n=t(this).closest(".job_listings");return s(t(this)),!(n.length>0)}),t(document.body).on("click",".load_more_jobs",function(){var e=t(this).closest("div.job_listings"),n=parseInt(t(this).data("page")||1,10);return t(this).addClass("loading"),n+=1,t(this).data("page",n),e.triggerHandler("update_results",[n,!0]),!1}),t.isFunction(t.fn.select2)&&"undefined"!=typeof job_manager_select2_args){var h=job_manager_select2_args;h.allowClear=!0,h.minimumResultsForSearch=10,t('select[name^="search_categories"]:visible').select2(h)}t(window).on("load",function(){t("div.job_listings").each(function(){var e=t(this),n=e.find(".job_filters"),i=!1,a=o(e);a&&(a.results&&(i=u(e,a.results),r(e,!1),g(e)),"string"==typeof a.form&&""!==a.form&&(n.find("input[type=checkbox]").prop("checked",!1),n.deserialize(a.form),n.find(':input[name^="search_categories"]').not(':input[type="hidden"]').trigger("change.select2"))),!i&&n.length>0&&e.triggerHandler("update_results",[1,!1])})}),t(window).on("unload",function(){return t("div.job_listings").each(function(){var e=o(t(this));e&&!e.persist_results&&c(t(this))}),!0})});